
version: '3.3'

services:
   test:
      container_name: test
      build: ./docker/Dockerfile.dev
      ports:
        - 8080:8080
      volumes:
        - ./:/app
      depends_on:
        - test_db
      networks:
        - test_network


   test_db:
      image: mysql:5.7
      volumes:
        - test_db_data:/var/lib/mysql
      restart: always
      environment:
        MYSQL_ROOT_PASSWORD: secret
        MYSQL_DATABASE: test
        MYSQL_USER: user
        MYSQL_PASSWORD: user
      ports: 
        - 3306:3306
      networks:
        - test_network

volumes:
   test_db_data: {}
networks:
   test:
     name: test_network